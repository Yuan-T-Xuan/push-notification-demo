(this["webpackJsonppush-notification-demo"]=this["webpackJsonppush-notification-demo"]||[]).push([[0],{112:function(e,t,n){},114:function(e,t,n){},142:function(e,t,n){var i={"./amplify-amazon-button_5.entry.js":[170,16],"./amplify-auth-fields_9.entry.js":[171,17],"./amplify-authenticator.entry.js":[172,5],"./amplify-button_3.entry.js":[173,18],"./amplify-chatbot.entry.js":[174,4],"./amplify-checkbox.entry.js":[175,19],"./amplify-confirm-sign-in_7.entry.js":[176,6],"./amplify-container.entry.js":[177,20],"./amplify-federated-buttons_2.entry.js":[178,21],"./amplify-federated-sign-in.entry.js":[179,22],"./amplify-form-field_4.entry.js":[180,23],"./amplify-greetings.entry.js":[181,24],"./amplify-icon-button.entry.js":[182,25],"./amplify-icon.entry.js":[183,7],"./amplify-link.entry.js":[184,26],"./amplify-nav_2.entry.js":[185,27],"./amplify-photo-picker.entry.js":[186,28],"./amplify-picker.entry.js":[187,29],"./amplify-radio-button_2.entry.js":[188,8],"./amplify-s3-album.entry.js":[189,9],"./amplify-s3-image-picker.entry.js":[190,10],"./amplify-s3-image.entry.js":[191,11],"./amplify-s3-text-picker.entry.js":[192,12],"./amplify-s3-text.entry.js":[193,13],"./amplify-select-mfa-type.entry.js":[194,30],"./amplify-sign-in-button.entry.js":[195,14],"./amplify-toast.entry.js":[196,31],"./amplify-tooltip.entry.js":[197,32]};function s(e){if(!n.o(i,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],s=t[0];return n.e(t[1]).then((function(){return n(s)}))}s.keys=function(){return Object.keys(i)},s.id=142,e.exports=s},167:function(e,t,n){"use strict";n.r(t);var i=n(12),s=n.n(i),r=n(90),o=n.n(r),a=(n(112),n(42)),c=n.n(a),p=n(63),u=(n(114),n(39)),l=n(224),f=n(24);var y=Object(l.a)((function(){var e="";function t(){return(t=Object(p.a)(c.a.mark((function t(){var n,i,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.currentAuthenticatedUser();case 2:n=t.sent,console.log(n.signInUserSession),i=n.signInUserSession.idToken.jwtToken,(s=new XMLHttpRequest).open("GET","https://api.a.breadth.app/dev/breadth/key_for_notifications",!0),s.setRequestHeader("Authorization",i),s.onload=function(){e=JSON.parse(s.responseText).key,console.log(e)},s.send(null);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function n(){return(n=Object(p.a)(c.a.mark((function t(){var n,i,s,r,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.currentAuthenticatedUser();case 2:if(n=t.sent,console.log(n.signInUserSession),i=n.signInUserSession.idToken.jwtToken,Notification.requestPermission((function(e){console.log("Notification permission status:",e)})),"granted"!==Notification.permission){t.next=19;break}return t.next=9,navigator.serviceWorker.register("./sw.js");case 9:return s=t.sent,t.next=12,s.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e});case 12:r=t.sent,console.log(JSON.stringify(r)),(o=new XMLHttpRequest).open("POST","https://api.a.breadth.app/dev/breadth/post_endpoint",!0),o.setRequestHeader("Authorization",i),o.onload=function(){console.log("Endpoint created and pushed successfully!")},o.send(JSON.stringify({item:JSON.stringify(r)}));case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)("header",{className:"App-header",children:[Object(f.jsx)("button",{onClick:function(){return t.apply(this,arguments)},children:"Get the Public Key"}),Object(f.jsx)("button",{onClick:function(){return n.apply(this,arguments)},children:"Setup Endpoint"})]})})})),d=function(e){e&&e instanceof Function&&n.e(35).then(n.bind(null,236)).then((function(t){var n=t.getCLS,i=t.getFID,s=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),i(e),s(e),r(e),o(e)}))},m={aws_project_region:"us-west-2",aws_cognito_identity_pool_id:"us-west-2:3493dbbb-8b3f-45f2-9547-e257ab8dd6df",aws_cognito_region:"us-west-2",aws_user_pools_id:"us-west-2_Ig4M2YLXD",aws_user_pools_web_client_id:"6pi3nnhm80cvqkcnb2ic1nb3i0",oauth:{},aws_cloud_logic_custom:[{name:"apid2e585c8",endpoint:"https://wc38vt2yj0.execute-api.us-west-2.amazonaws.com/dev",region:"us-west-2"}]};n(62).default.configure(m),o.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(y,{})}),document.getElementById("root")),d()}},[[167,2,3]]]);
//# sourceMappingURL=main.6107e795.chunk.js.map